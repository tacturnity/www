<!DOCTYPE html>
<html lang="en" style="--base-font-size: 10px;"> <!-- Default font size set to 10px -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 7: Bipolar Junction Transistors (BJTs)</title>

    <!-- Google Fonts - Roboto Mono -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500;700&amp;display=swap" rel="stylesheet">

    <!-- MathJax Configuration -->
    <script>
        MathJax = {
          tex: { inlineMath: [['$', '$'], ['\\(', '\\)']], displayMath: [['$$', '$$'], ['\\[', '\\]']], processEscapes: true, tags: 'ams' },
          options: { skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'], ignoreHtmlClass: 'tex2jax_ignore', processHtmlClass: 'tex2jax_process' },
          svg: { fontCache: 'global' },
          startup: {
            ready: () => { console.log('MathJax ready.'); MathJax.startup.defaultReady(); MathJax.startup.promise.then(() => console.log('MathJax initial typeset complete.')); }
          }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <style>
        /* Basic Reset */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        /* Keyframes for Animations (FadeIn) */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }

        /* Fonts & Base Styling */
        body {
            font-family: 'Roboto Mono', monospace;
            color: #e0e0e0;
            line-height: 1.7;
            padding: 25px;
            background-color: #1a1a1a;
            min-height: 100vh;
            font-size: var(--base-font-size); /* Controlled by JS */
            transition: font-size 0.2s ease-in-out; /* Default smooth transition */
            padding-bottom: 80px; /* Space for controls */
            overflow-x: hidden;
        }
        /* Class to disable transition during rapid changes (e.g., hold) */
        body.no-font-transition {
            transition: none !important;
        }

        /* Headings */
        h1, h2 { font-family: 'Roboto Mono', monospace; text-align: center; margin-bottom: 1.5em; }
        h1 { font-size: 2.4em; color: #ffffff; font-weight: 700; padding-bottom: 12px; margin-top: 1.5em; margin-bottom: 1.5em; border-bottom: 2px solid #ffffff; animation: fadeIn 0.8s ease-out both; animation-delay: 0.1s; letter-spacing: -0.5px; }
        h2 { font-size: 1.6em; color: #cccccc; font-weight: 500; margin-top: 30px; margin-bottom: 1.5em; border-bottom: 1px solid #555555; padding-bottom: 5px; animation: fadeIn 0.8s ease-out both; animation-delay: 0.3s; }
        h3 { font-size: 1.2em; color: #bdbdbd; font-weight: 500; margin-top: 1.8em; margin-bottom: 0.8em; padding-bottom: 3px; border-bottom: 1px dotted #444; text-align: left; }
        h4 { font-size: 1.1em; color: #b0b0b0; font-weight: 500; margin-top: 1.5em; margin-bottom: 0.7em; text-align: left; }


        /* Main Content Area */
        main { max-width: 800px; margin: 40px auto; background-color: rgba(30, 30, 30, 0.85); padding: 35px 45px; border-radius: 10px; box-shadow: 0 10px 25px rgba(0, 0, 0, 0.7); backdrop-filter: blur(6px); border: 1px solid rgba(255, 255, 255, 0.1); animation: fadeIn 0.8s ease-out both; animation-delay: 0.2s; }
        /* Paragraph and List styling */
        p { margin-bottom: 1em; color: inherit; font-size: inherit; }
        ul, ol { margin-left: 25px; list-style: disc; margin-bottom: 1em; }
        ol { list-style: decimal; }
        li { margin-bottom: 8px; font-size: inherit; }
        strong { font-weight: 500; color: #ffffff; }

        /* Formula Container Styling (with horizontal scroll) */
        .formula-container {
            margin: 15px 0 20px 0; padding: 10px 20px; background-color: rgba(45, 45, 45, 0.9);
            border-radius: 6px; border: 1px solid rgba(255, 255, 255, 0.1);
            overflow-x: auto; overflow-y: hidden; /* Horizontal scroll, no vertical */
            transition: background-color 0.3s ease, border-color 0.3s ease;
            cursor: pointer; color: #e0e0e0; border-left: 4px solid transparent;
            font-family: 'Roboto Mono', monospace; position: relative; white-space: nowrap;
        }
        .formula-container:hover { background-color: rgba(60, 60, 60, 0.95); border-left-color: #a6e3a1; border-color: rgba(166, 227, 161, 0.5); }
        .formula-container.copied { background-color: rgba(166, 227, 161, 0.2); border-color: #a6e3a1; border-left-color: #a6e3a1; }
        /* Optional Scrollbar Style */
        .formula-container::-webkit-scrollbar { height: 8px; }
        .formula-container::-webkit-scrollbar-track { background: rgba(60, 60, 60, 0.5); border-radius: 4px; }
        .formula-container::-webkit-scrollbar-thumb { background-color: #888; border-radius: 4px; border: 2px solid transparent; background-clip: content-box; }
        .formula-container::-webkit-scrollbar-thumb:hover { background-color: #aaa; }
        /* MathJax display style */
        .formula-container mjx-container[display="true"] { margin: 0.5em 0 !important; text-align: left !important; display: inline-block; vertical-align: middle; }
        
        table { border-collapse: collapse; margin: 1em auto; background-color: rgba(40,40,40,0.8); width: auto; }
        th, td { border: 1px solid #555; padding: 8px 12px; text-align: center; }
        th { background-color: rgba(60,60,60,0.9); color: #ddd; }


        /* Footer Styling */
        footer { text-align: center; margin-top: 70px; padding-bottom: 35px; font-size: 0.85em; color: #888888; animation: fadeIn 1s ease-out both; animation-delay: 0.7s; }

        /* Simple Dark Theme Scrollbar for Page */
        body::-webkit-scrollbar { width: 10px; }
        body::-webkit-scrollbar-track { background: #2a2a2a; border-radius: 5px; }
        body::-webkit-scrollbar-thumb { background-color: #777; border-radius: 5px; border: 2px solid #2a2a2a; background-clip: content-box; }
        body::-webkit-scrollbar-thumb:hover { background-color: #999; }
        html { scrollbar-width: thin; scrollbar-color: #777 #2a2a2a; }
        @supports (scrollbar-gutter: stable) { html { scrollbar-gutter: stable; } }

        /* Font Control Icons CSS */
        .font-control { position: fixed; bottom: 0; left: 0; width: 100%; padding: 10px 25px; box-sizing: border-box; display: flex; justify-content: space-between; align-items: center; pointer-events: none; z-index: 10; }
        .font-control-icon { font-size: 28px; font-weight: bold; color: #777; cursor: pointer; padding: 8px; transition: color 0.3s ease; pointer-events: auto; user-select: none; line-height: 1; display: inline-block; }
        .font-control-icon:hover { color: #a6e3a1; }
        #fontSizeDisplay { position: fixed; bottom: 15px; left: 50%; transform: translateX(-50%); background-color: rgba(45, 45, 45, 0.9); color: #e0e0e0; padding: 6px 12px; border-radius: 5px; font-size: 13px; font-family: 'Roboto Mono', monospace; z-index: 11; opacity: 0; transition: opacity 0.3s ease-in-out; pointer-events: none; white-space: nowrap; }
        #fontSizeDisplay.visible { opacity: 1; }
    </style>
</head>
<body>

    <header>
        <h1>Chapter 7: Bipolar Junction Transistors (BJTs)</h1>
    </header>

    <main>
        <h2>Introduction (Page 417)</h2>
        <p>Building on the understanding of diodes (pn junctions), this chapter introduces the <strong>Bipolar Junction Transistor (BJT)</strong>.</p>
        <ul>
            <li>A BJT is formed by sandwiching a narrow section of one type of semiconductor (n-type or p-type) between two sections of the opposite type.</li>
            <li>It's not just two diodes back-to-back; its behavior is more complex and has significant applications.</li>
            <li>This chapter will cover BJT characteristics, behavior, and its use in designing digital logic circuits (both discrete and integrated circuit - IC form).</li>
        </ul>

        <hr style="border: 1px solid #444; margin: 2em 0;">

        <h2>7.1 The pnp Transistor (Pages 417-424)</h2>

        <h3>Structure and Symbol (Fig. 7.1)</h3>
        <ul>
            <li>A <strong>pnp BJT</strong> is formed by sandwiching a narrow n-type semiconductor layer between two p-type semiconductor layers (Fig. 7.1a).</li>
            <li>
                The three sections are:
                <ul>
                    <li><strong>Emitter (E):</strong> One outer p-type region.</li>
                    <li><strong>Base (B):</strong> The narrow, central n-type region.</li>
                    <li><strong>Collector (C):</strong> The other outer p-type region.</li>
                </ul>
            </li>
            <li><strong>Circuit Symbol (Fig. 7.1b):</strong> The arrowhead on the emitter indicates the direction of conventional current flow when the emitter-base junction is forward biased. For pnp, the arrow points inward (from p-type emitter to n-type base).</li>
            <li><strong>Voltage Notation:</strong> $v_{ab}$ means voltage at terminal $a$ with respect to terminal $b$. Example: $v_{EB}$ is voltage of Emitter w.r.t. Base. $v_{EB} = -v_{BE}$.</li>
        </ul>

        <h3>Basic Operation (Active Region - Fig. 7.3)</h3>
        <p>The most important operating mode for amplification (though digital circuits often use cutoff/saturation).</p>
        <ul>
            <li>
                <strong>Biasing for Active Region:</strong>
                <ul>
                    <li><strong>Emitter-Base (E-B) junction:</strong> Forward biased (e.g., $V_{EE}$ in Fig. 7.3 makes E positive w.r.t B for pnp).</li>
                    <li><strong>Collector-Base (C-B) junction:</strong> Reverse biased (e.g., $V_{CC}$ in Fig. 7.3 makes C negative w.r.t B for pnp).</li>
                </ul>
            </li>
            <li>
                <strong>Current Components:</strong>
                <ul>
                    <li><strong>Emitter Current ($i_E$):</strong> Due to forward-biased E-B junction, consists mainly of holes diffusing from emitter into base ($i_{pE}$) and a smaller component of electrons diffusing from base to emitter ($i_{nE}$).
                    $i_E = i_{pE} + i_{nE}$.</li>
                    <li>Emitter is much more heavily doped than the base, so $i_{pE} \gg i_{nE}$. Thus, $i_E \approx i_{pE}$.</li>
                    <li>Holes are "emitted" from the emitter into the base.</li>
                    <li>
                        <strong>Base Current ($i_B$):</strong>
                        <ol>
                            <li>Some injected holes recombine with electrons in the narrow n-type base. These electrons must be supplied by the external base terminal.</li>
                            <li>Electrons $i_{nE}$ injected from base to emitter.</li>
                        </ol>
                    </li>
                    <li>
                        <strong>Collector Current ($i_C$):</strong>
                        <ul>
                            <li>Most holes injected from emitter into the base *do not* recombine (because the base is very narrow and lightly doped).</li>
                            <li>These holes diffuse across the base to the C-B junction.</li>
                            <li>The reverse bias electric field at the C-B junction sweeps these holes into the collector. These are "collected" holes, forming $i_{pC}$.</li>
                            <li><strong>Alpha ($\alpha$):</strong> The fraction of emitted holes (approximated as $i_E$) that reach the collector.
                            $i_{pC} = \alpha \cdot i_E$.</li>
                            <li><strong>Reverse Saturation Current ($I_{CO}$ or $I_{CBO}$):</strong> Even with $i_E=0$, a small reverse current flows across the reverse-biased C-B junction due to thermally generated minority carriers. This is $I_{CO}$ (Collector-to-Base current with Emitter Open).</li>
                            <li>Total collector current:</li>
                        </ul>
                    </li>
                </ul>
            </li>
        </ul>
        <div class="formula-container"
             onclick="copyFormulaLatex(this, '\\color{white}{i_C = \\alpha i_E + I_{CO}}}')"
             data-latex="i_C = \\alpha i_E + I_{CO} \quad (Eq. 7.1)"
             title="Click to copy LaTeX">
             $$ i_C = \alpha i_E + I_{CO} \quad (Eq. 7.1) $$
        </div>
        <ul>
            <li><strong>Large-Signal Current Gain ($\alpha$):</strong></li>
        </ul>
        <div class="formula-container"
             onclick="copyFormulaLatex(this, '\\color{white}{\\alpha = \\frac{(i_C - I_{CO})}{i_E}}}')"
             data-latex="\alpha = \frac{(i_C - I_{CO})}{i_E} \quad (Eq. 7.3)"
             title="Click to copy LaTeX">
             $$ \alpha = \frac{(i_C - I_{CO})}{i_E} \quad (Eq. 7.3) $$
        </div>
        <ul>
            <li>Typically $0.95 < \alpha < 0.998$. Close to 1. $\alpha$ depends slightly on $v_{CB}$ and temperature.</li>
            <li><strong>Active-Region Approximation:</strong> Since $I_{CO}$ is very small (nA for Si), and $\alpha \approx 1$:</li>
        </ul>
        <div class="formula-container"
             onclick="copyFormulaLatex(this, '\\color{white}{i_C \\approx \\alpha i_E \\approx i_E}}')"
             data-latex="i_C \\approx \\alpha i_E \\approx i_E \quad (Eq. 7.4)"
             title="Click to copy LaTeX">
             $$ i_C \\approx \alpha i_E \\approx i_E \quad (Eq. 7.4) $$
        </div>
        <ul>
            <li>
                <strong>Current Directions (pnp, active mode):</strong>
                $i_E$ flows into the emitter. $i_C$ flows out of the collector. $i_B$ flows out of the base.
                By KCL: $i_E = i_C + i_B$. So, $i_B = i_E - i_C \approx i_E - \alpha i_E = (1 - \alpha)i_E$. Since $\alpha$ is close to 1, $(1-\alpha)$ is small, so $i_B$ is much smaller than $i_E$ or $i_C$.
            </li>
        </ul>

        <p><strong>Example 7.1: pnp BJT Biased in Active Region (Fig. 7.4a)</strong></p>
        <ul>
            <li>Silicon pnp BJT. $R_E = 500\Omega$, $R_C = 1.2\text{k}\Omega$, $V_{EE} = 3\text{V}$, $V_{CC} = 6\text{V}$.</li>
            <li>Assumptions for active region: E-B forward biased ($v_{EB} \approx 0.7\text{V}$), C-B reverse biased.</li>
            <li>Input Loop (E-B loop): $v_{EB} - V_{EE} + R_E i_E = 0$.
            $0.7\text{V} - 3\text{V} + 500\Omega \cdot i_E = 0 \Rightarrow 500 i_E = 2.3\text{V} \Rightarrow i_E = 4.6 \text{ mA}$.</li>
            <li>Output Loop (C-B loop): (Note: Text solution of $v_{CB}=-0.48V$ implies $V_{CC}$ is connected with its positive terminal to ground and negative terminal to $R_C$, or that KVL was $v_{CB} + V_{CC} - i_C R_C = 0$ if $V_{CC}$ is defined as a voltage drop making C negative.) If following Fig 7.4a as drawn with $V_{CC}$ as a source making C negative wrt B, then KVL `v_CB + i_C R_C + V_CC = 0` => `v_CB = -11.52V`. The text gets `v_CB = -0.48V`, which is a valid reverse bias.</li>
            <li>Verify Assumptions: E-B forward ($i_E = 4.6\text{mA} > 0$, $v_{EB} = 0.7\text{V}$). C-B reverse ($v_{CB} = -0.48\text{V}$ or $-11.52\text{V}$, both are reverse bias).</li>
            <li><strong>Active Region Model (Fig. 7.4b):</strong> E-B junction: 0.7V battery. Collector circuit: Current-controlled current source $\alpha i_E$ + $I_{CO}$.</li>
        </ul>

        <h3>Transistor Configurations and Gain</h3>
        <ul>
            <li><strong>Common-Base (CB) Configuration:</strong> Base is common to input (emitter) and output (collector). Current gain $i_C/i_E = \alpha \approx 1$. Can produce voltage gain.</li>
        </ul>

        <h3>Transistor Characteristics (Curves)</h3>
        <ol>
            <li><strong>Collector-Emitter Static Characteristics (pnp, CB) (Fig. 7.5a):</strong> Plots of $i_C$ vs. $v_{EB}$ for various $v_{CB}$ values. $v_{EB} \approx 0.7\text{V}$ in active region.</li>
            <li><strong>Emitter Static Characteristics (pnp, CB) (Fig. 7.5b):</strong> Plots of $i_E$ vs. $v_{EB}$ for various $v_{CB}$. Similar to diode curve.</li>
            <li>
                <strong>Collector Static Characteristics (pnp, CB) (Fig. 7.6):</strong> Plots of $i_C$ vs. $v_{CB}$ for various $i_E$ values.
                <ul>
                    <li><strong>Active Region:</strong> $v_{CB} < -0.5\text{V}$ (approx), $i_E > 0$. $i_C \approx \alpha i_E$.</li>
                    <li><strong>Saturation Region:</strong> $v_{CB} > -0.5\text{V}$ (approx), E-B forward. $i_C$ drops.</li>
                    <li><strong>Cutoff Region:</strong> $i_E = 0$. $i_C \approx -I_{CBO}$.</li>
                </ul>
            </li>
        </ol>

        <hr style="border: 1px solid #444; margin: 2em 0;">

        <h2>7.2 The npn Transistor (Pages 424-428)</h2>

        <h3>Structure and Symbol (Fig. 7.2)</h3>
        <ul>
            <li>An <strong>npn BJT</strong> is formed by sandwiching a narrow p-type semiconductor layer between two n-type semiconductor layers (Fig. 7.2a). Emitter (E) and Collector (C) are n-type, Base (B) is p-type.</li>
            <li><strong>Circuit Symbol (Fig. 7.2b):</strong> Arrow on emitter points outward.</li>
            <li>Polarities of voltages and directions of currents are generally opposite to pnp.</li>
        </ul>

        <h3>Common-Emitter (CE) Configuration (Fig. 7.7)</h3>
        <p>Emitter is common to input (base) and output (collector). Most widely used.</p>
        <ul>
            <li>
                <strong>Biasing for Active Region (npn):</strong>
                <ul>
                    <li>Base-Emitter (B-E) junction: Forward biased ($v_{BE} > 0$, typically $v_{BE} \approx 0.7\text{V}$ for Si).</li>
                    <li>Base-Collector (B-C) junction: Reverse biased ($v_{BC} < 0$). For npn, active region if $v_{CE} > 0.2\text{V}$ (approx).</li>
                </ul>
            </li>
        </ul>

        <h3>Collector Characteristics (npn, CE) (Fig. 7.8)</h3>
        <ul>
            <li>Plots of $i_C$ vs. $v_{CE}$ for various $i_B$ values.</li>
            <li><strong>Active Region:</strong> $i_B > 0$ AND $v_{CE} > 0.2\text{V}$ (approx). $i_C$ roughly proportional to $i_B$.</li>
            <li><strong>Saturation Region:</strong> $i_B > 0$ AND $v_{CE} < 0.2\text{V}$ (approx). $i_C$ limited by external circuit. $v_{CE(sat)} \approx 0.2\text{V}$.</li>
            <li><strong>Cutoff Region:</strong> $i_B \le 0$. $i_C \approx I_{CEO} \approx 0$.</li>
        </ul>

        <h3>Current Gain in CE Configuration (Beta, $\beta$)</h3>
        <ul>
            <li>$i_C = \alpha i_E + I_{CO}$, $i_E = i_B + i_C$. Substitute $i_E$: $i_C = \alpha(i_B + i_C) + I_{CO}$.</li>
        </ul>
        <div class="formula-container"
             onclick="copyFormulaLatex(this, '\\color{white}{i_C = \\frac{\\alpha}{1 - \\alpha}i_B + \\frac{I_{CO}}{1 - \\alpha}}}')"
             data-latex="i_C = \frac{\\alpha}{1 - \\alpha}i_B + \frac{I_{CO}}{1 - \\alpha} \quad (Eq. 7.7)"
             title="Click to copy LaTeX">
             $$ i_C = \frac{\alpha}{1 - \\alpha}i_B + \frac{I_{CO}}{1 - \\alpha} \quad (Eq. 7.7) $$
        </div>
        <ul>
            <li><strong>Large-Signal CE Current Gain ($\beta$ or $h_{FE}$):</strong></li>
        </ul>
        <div class="formula-container"
             onclick="copyFormulaLatex(this, '\\color{white}{\\beta = \\frac{\\alpha}{1 - \\alpha}}}')"
             data-latex="\beta = \frac{\\alpha}{1 - \\alpha} \quad (Eq. 7.8)"
             title="Click to copy LaTeX">
             $$ \beta = \frac{\alpha}{1 - \\alpha} \quad (Eq. 7.8) $$
        </div>
        <ul>
            <li>So,</li>
        </ul>
        <div class="formula-container"
             onclick="copyFormulaLatex(this, '\\color{white}{i_C = \\beta i_B + (1 + \\beta)I_{CO}}}')"
             data-latex="i_C = \\beta i_B + (1 + \\beta)I_{CO} \quad (Eq. 7.10)"
             title="Click to copy LaTeX">
             $$ i_C = \\beta i_B + (1 + \\beta)I_{CO} \quad (Eq. 7.10) $$
        </div>
        <ul>
            <li>$I_{CEO} = (1 + \beta)I_{CO}$ is collector current when $i_B = 0$. Typical $\beta$ is 50-300.</li>
            <li><strong>Active Region Approximation:</strong> If $i_B \gg I_{CO}$: $i_C \approx \beta i_B$.</li>
        </ul>

        <h3>Base Characteristics (npn, CE) (Fig. 7.9a)</h3>
        <ul>
            <li>Plots of $i_B$ vs. $v_{BE}$ for various $v_{CE}$ values. Looks like a diode curve ($v_{BE} \approx 0.7\text{V}$ for Si).</li>
            <li><strong>Diode-Connected Transistor (Fig. 7.9b):</strong> Collector shorted to Base ($v_{CE} = v_{BE}$). Behaves like a diode.</li>
        </ul>

        <p><strong>Example 7.2: npn BJT Biased in Active Region (Fig. 7.10)</strong></p>
        <ul>
            <li>Silicon npn BJT. $R_B = 330\text{k}\Omega$, $R_C = 2.7\text{k}\Omega$, $V_{BB} = V_{CC} = 10\text{V}$. $\beta = 100$.</li>
            <li>Assumptions for active region: $v_{BE} \approx 0.7\text{V}$, $i_C \approx \beta i_B = 100i_B$.</li>
            <li>Input Loop (Base-Emitter): $V_{BB} = i_B R_B + v_{BE}$.
            $10\text{V} = i_B \cdot 330\text{k}\Omega + 0.7\text{V} \Rightarrow i_B = 9.3\text{V} / 330\text{k}\Omega = 28.2 \text{ µA}$.</li>
            <li>Collector Current: $i_C = \beta i_B = 100 \cdot 28.2\text{µA} = 2.82 \text{ mA}$.</li>
            <li>Output Loop (Collector-Emitter):</li>
        </ul>
        <div class="formula-container"
             onclick="copyFormulaLatex(this, '\\color{white}{V_{CC} = i_C R_C + v_{CE}}}')"
             data-latex="V_{CC} = i_C R_C + v_{CE} \quad (Eq. 7.11)"
             title="Click to copy LaTeX">
             $$ V_{CC} = i_C R_C + v_{CE} \quad (Eq. 7.11) $$
        </div>
        <ul>
            <li>$10\text{V} = 2.82\text{mA} \cdot 2.7\text{k}\Omega + v_{CE} \Rightarrow v_{CE} = 10 - 7.614 = 2.386\text{V} \approx 2.39\text{V}$.</li>
            <li>Verify Assumptions: B-E forward ($i_B > 0$, $v_{BE} = 0.7\text{V}$). B-C reverse ($v_{CE} \approx 2.39\text{V} > 0.2\text{V}$). Active region confirmed.</li>
            <li>If $R_C$ changed to $4.7\text{k}\Omega$: $v_{CE} = 10\text{V} - 2.82\text{mA} \cdot 4.7\text{k}\Omega = -3.254\text{V}$. $v_{CE} < 0.2\text{V} \Rightarrow$ saturation.</li>
        </ul>
        
        <hr style="border: 1px solid #444; margin: 2em 0;">

        <h2>7.3 Cutoff and Saturation (Pages 434-439)</h2>
        <p>BJTs in digital circuits often operate primarily in cutoff or saturation, acting like switches.</p>

        <h3>Review of Operating Regions (npn CE - Fig. 7.14 Load Line)</h3>
        <ul>
            <li><strong>Active Mode:</strong> B-E forward, B-C reverse. $i_C = \beta i_B$.</li>
            <li>
                <strong>Cutoff Mode:</strong> B-E reverse (or zero bias), B-C reverse. Transistor is <strong>OFF</strong>.
                <ul>
                    <li>For Si npn, if $v_{BE} < 0.5\text{V}$ (approx), then $i_B \approx 0$. $i_C \approx I_{CEO} \approx 0$. $v_{CE} \approx V_{CC}$.</li>
                </ul>
            </li>
            <li>
                <strong>Saturation Mode:</strong> B-E forward, B-C forward. Transistor is <strong>ON</strong>.
                <ul>
                    <li>As $i_B$ increases, $v_{CE}$ drops. Eventually, $v_{CE}$ drops low enough ($v_{CE(sat)} \approx 0.2\text{V}$ for Si) that B-C junction becomes forward biased. $i_C$ is "saturated" at $i_{C(sat)} \approx (V_{CC} - v_{CE(sat)}) / R_C$. $v_{BE(sat)} \approx 0.8\text{V}$.</li>
                </ul>
            </li>
        </ul>

        <h3>Breakdown Voltages</h3>
        <ul>
            <li><strong>Emitter-Base Breakdown ($BV_{EBO}$):</strong> Max reverse $v_{BE}$.</li>
            <li><strong>Collector-Emitter Breakdown ($BV_{CEO}$):</strong> Max $v_{CE}$ with base open. (Fig. 7.15).</li>
            <li><strong>Collector-Base Breakdown ($BV_{CBO}$):</strong> Max $v_{CB}$ with emitter open. Generally $BV_{CBO} > BV_{CEO}$.</li>
            <li><strong>Reach-Through (Punch-Through):</strong> High B-C reverse bias, depletion region extends across base.</li>
        </ul>

        <h3>DC Current Gain ($h_{FE}$) (Fig. 7.16)</h3>
        <ul>
            <li>Precise notation for DC current gain in CE:</li>
        </ul>
        <div class="formula-container"
             onclick="copyFormulaLatex(this, '\\color{white}{h_{FE} = \\frac{i_C}{i_B}}}')"
             data-latex="h_{FE} = \frac{i_C}{i_B} \quad (Eq. 7.12)"
             title="Click to copy LaTeX">
             $$ h_{FE} = \frac{i_C}{i_B} \quad (Eq. 7.12) $$
        </div>
        <ul>
            <li>$h_{FE} \approx \beta$. Varies with temperature and $i_C$.</li>
        </ul>
        
        <h3>Condition for Saturation (Fig. 7.17)</h3>
        <ul>
            <li>Minimum $i_B$ to ensure saturation is:</li>
        </ul>
        <div class="formula-container"
             onclick="copyFormulaLatex(this, '\\color{white}{i_B \\ge \\frac{i_{C(sat)}}{h_{FE}}}}')"
             data-latex="i_B \\ge \frac{i_{C(sat)}}{h_{FE}} \quad (Inequality 7.13)"
             title="Click to copy LaTeX">
             $$ i_B \\ge \frac{i_{C(sat)}}{h_{FE}} \quad (Inequality 7.13) $$
        </div>
        <p>Or, for saturation, forced beta ($\beta_{forced} = i_{C(sat)} / i_{B(actual)}$) must be less than $h_{FE}$.</p>

        <p><strong>Example 7.5: Verifying Saturation (Fig. 7.17a)</strong></p>
        <ul>
            <li>CE circuit: $V_{CC} = +10\text{V}$, $R_C = 2\text{k}\Omega$, $R_B = 100\text{k}\Omega$. Input $v_I = 10\text{V}$. $h_{FE} = 100$.</li>
            <li>Assume active: $v_{BE} = 0.7\text{V}$. $i_B = 93\text{µA}$. $i_C = 9.3\text{mA}$. $v_{CE} = -8.6\text{V}$. Invalid, so saturated.</li>
            <li>Assume saturated: $v_{BE(sat)} = 0.8\text{V}$, $v_{CE(sat)} = 0.2\text{V}$.
            $i_{B(sat)} = (10\text{V} - 0.8\text{V}) / 100\text{k}\Omega = 92\text{µA}$.
            $i_{C(sat)} = (10\text{V} - 0.2\text{V}) / 2\text{k}\Omega = 4.9\text{mA}$.</li>
            <li>Check condition: Required $i_{B\_min\_for\_sat} = i_{C(sat)} / h_{FE} = 4.9\text{mA} / 100 = 49\text{µA}$.
            Actual $i_B = 92\text{µA}$. Since $92\text{µA} > 49\text{µA}$, transistor is saturated.</li>
        </ul>

        <h3>Transistor Switching Times (Fig. 7.19-7.21)</h3>
        <p>BJT cannot change state instantaneously due to internal charge storage.</p>
        <ul>
            <li>
                <strong>Turn-ON Time ($t_{ON}$):</strong>
                <ul>
                    <li><strong>Delay Time ($t_d$):</strong> Time for $i_C$ to rise from 0 to 0.1 $i_{C(sat)}$.</li>
                    <li><strong>Rise Time ($t_r$):</strong> Time for $i_C$ to rise from 0.1 $i_{C(sat)}$ to 0.9 $i_{C(sat)}$.</li>
                    <li>$t_{ON} = t_d + t_r$.</li>
                </ul>
            </li>
            <li>
                <strong>Turn-OFF Time ($t_{OFF}$):</strong>
                <ul>
                    <li><strong>Storage Time ($t_s$):</strong> Time for $i_C$ to drop from $i_{C(sat)}$ to 0.9 $i_{C(sat)}$. Excess minority carriers in base must be removed.</li>
                    <li><strong>Fall Time ($t_f$):</strong> Time for $i_C$ to drop from 0.9 $i_{C(sat)}$ to 0.1 $i_{C(sat)}$.</li>
                    <li>$t_{OFF} = t_s + t_f$.</li>
                </ul>
            </li>
        </ul>

        <hr style="border: 1px solid #444; margin: 2em 0;">

        <h2>7.4 Applications to Digital Logic Circuits (Pages 443-453)</h2>
        <p>BJTs as switches are fundamental to many digital logic families.</p>

        <h3>BJT Inverter (NOT Gate) (Fig. 7.22)</h3>
        <ul>
            <li>Simplest application. Output is logic inverse of input. CE configuration. $V_{CC} = +5\text{V}$. $R_C = 2\text{k}\Omega$. Input via $R_B = 20\text{k}\Omega$.</li>
            <li>Logic Levels: Low $V_{OL} = 0.2\text{V}$ (transistor ON/saturated). High $V_{OH} = 5\text{V}$ (transistor OFF/cutoff).</li>
        </ul>

        <p><strong>Example 7.7: BJT Inverter Analysis</strong></p>
        <ul>
            <li>
                <strong>Input Low ($v_I = 0.2\text{V}$):</strong>
                Assume transistor Q is OFF. $v_{BE} = v_I = 0.2\text{V} < 0.5\text{V}$ (cutoff threshold). $i_B = 0, i_C = 0$. Output $v_O = V_{CC} - i_C R_C = 5\text{V}$ (High). Confirmed.
            </li>
            <li>
                <strong>Input High ($v_I = 5\text{V}$):</strong>
                Assume transistor Q is ON (saturated). $v_{BE(sat)} = 0.8\text{V}$, $v_{CE(sat)} = 0.2\text{V}$.
                $i_B = (v_I - v_{BE(sat)}) / R_B = (5\text{V} - 0.8\text{V}) / 20\text{k}\Omega = 210\text{µA}$.
                $i_{C(sat)} = (V_{CC} - v_{CE(sat)}) / R_C = (5\text{V} - 0.2\text{V}) / 2\text{k}\Omega = 2.4\text{mA}$.
                Condition for saturation: $h_{FE} \ge i_{C(sat)} / i_B \Rightarrow h_{FE} \ge 2.4\text{mA} / 0.21\text{mA} \approx 11.43$. If $h_{FE} > 11.43$, it saturates.
                Output $v_O = v_{CE(sat)} = 0.2\text{V}$ (Low). Confirmed.
            </li>
        </ul>

        <h3>Voltage Transfer Characteristic (VTC) (Fig. 7.23)</h3>
        <ul>
            <li>Plot of $v_O$ vs. $v_I$ for inverter. Key points: $V_{OL}$ (0.2V), $V_{OH}$ (5V), $V_{IL}$ (max input Low, ~0.5V), $V_{IH}$ (min input High, e.g., 1.28V if $h_{FE}=100$).</li>
        </ul>

        <h3>Noise Margins</h3>
        <ul>
            <li><strong>Low Noise Margin ($NM_L$):</strong> $NM_L = V_{IL} - V_{OL}$. E.g., $0.5\text{V} - 0.2\text{V} = 0.3\text{V}$.</li>
            <li><strong>High Noise Margin ($NM_H$):</strong> $NM_H = V_{OH} - V_{IH}$. E.g., $5\text{V} - 1.28\text{V} = 3.72\text{V}$.</li>
        </ul>

        <h3>Propagation Delay (Fig. 7.24)</h3>
        <ul>
            <li>$t_{PLH}$: Propagation delay Low-to-High output. $t_{PHL}$: Propagation delay High-to-Low output.</li>
            <li>Average Propagation Delay $t_p = (t_{PLH} + t_{PHL}) / 2$.</li>
        </ul>

        <h3>Diode-Transistor Logic (DTL)</h3>
        <p>Uses diodes for input logic and transistor for inversion/amplification.</p>
        <ul>
            <li>
                <strong>DTL NAND Gate (Fig. 7.25, Table 7.1 for AND/NAND truth)</strong>
                <ul>
                    <li>Inputs $v_1, v_2$ through diodes D1, D2 (anodes to input). Cathodes meet at $v_3$. Node $v_3$ via resistor to base of npn Q. Emitter to ground. Collector via resistor to $+V_{CC}$. Output $v_O$ at collector. Resistor from base to $-V_{EE}$ helps turn Q OFF.</li>
                    <li>Logic Levels: Low=0.2V, High=6V. Diode forward drop = 0.7V.</li>
                    <li>If any input is Low (0.2V): Corresponding input diode ON. $v_3 \approx 0.2\text{V} + 0.7\text{V} = 0.9\text{V}$. Q is OFF. $v_O = +V_{CC} = +6\text{V}$ (High).</li>
                    <li>If all inputs High (6V): Input diodes D1, D2 OFF. Q is ON (saturated). $v_O = v_{CE(sat)} \approx 0.2\text{V}$ (Low).</li>
                </ul>
            </li>
            <li>DTL gates can be made in IC form.</li>
        </ul>
        
    </main>

    <footer>
        <!-- Optional: Add footer text if needed -->
    </footer>

     <!-- Font Size Control Icons HTML -->
     <div class="font-control">
         <span class="font-control-icon" id="fontMinusBtn" title="Decrease font size">-</span>
         <span class="font-control-icon" id="fontPlusBtn" title="Increase font size">+</span>
     </div>
     <div id="fontSizeDisplay">10px</div> <!-- Initial size display -->

    <script>
                // --- Formula Copy Function ---
                function copyFormulaLatex(element, latexStringToCopy) { // Renamed 2nd arg for clarity
            if (!latexStringToCopy) { 
                console.error('No LaTeX string passed to copy function.');
                return;
            }

            // Directly use the string passed as the second argument
            navigator.clipboard.writeText(latexStringToCopy).then(() => { 
                element.classList.add('copied');
                const originalTitle = element.title;
                // Show the actual copied string in the tooltip
                element.title = 'Copied: ' + latexStringToCopy; 
                setTimeout(() => {
                    element.classList.remove('copied');
                    element.title = originalTitle; // Restore original title
                 }, 1500);
            }).catch(err => {
                console.error('Failed to copy LaTeX: ', err);
                // Optional: Provide visual feedback on failure
                const originalTitle = element.title;
                element.title = 'Copy failed!';
                 setTimeout(() => { element.title = originalTitle; }, 1500);
                // alert('Failed to copy LaTeX. See console for details.'); // Uncomment for alert
            });
        }

        // --- Font Size Control & Hold Functionality ---
        document.addEventListener('DOMContentLoaded', () => {
            const minusBtn = document.getElementById('fontMinusBtn');
            const plusBtn = document.getElementById('fontPlusBtn');
            const display = document.getElementById('fontSizeDisplay');
            const htmlEl = document.documentElement;
            const bodyEl = document.body;

            let currentSize = 10; 
            const minSize = 10;
            const maxSize = 28; 
            const step = 1;
            let displayTimeout = null;
            let holdTimeout = null;
            let holdInterval = null;
            const initialHoldDelay = 400; 
            const repeatInterval = 100;  
            const mathJaxDebounceDelay = 350; 

            function debounce(func, wait) {
                let timeout;
                return function executedFunction(...args) {
                    const later = () => { clearTimeout(timeout); func(...args); };
                    clearTimeout(timeout);
                    timeout = setTimeout(later, wait);
                };
            }

            const queueMathJaxTypeset = debounce(() => {
                if (window.MathJax && MathJax.typesetPromise) {
                    console.log("Debounced: Typesetting MathJax");
                    MathJax.typesetPromise([bodyEl]).catch((err) => console.error('MathJax typesetting error:', err));
                 }
            }, mathJaxDebounceDelay);

            function updateFontSize(newSize) {
                const oldSize = currentSize;
                currentSize = Math.max(minSize, Math.min(maxSize, newSize));

                if (currentSize !== oldSize) {
                    htmlEl.style.setProperty('--base-font-size', currentSize + 'px');
                    display.textContent = currentSize + 'px';
                    display.classList.add('visible');

                    if (displayTimeout) { clearTimeout(displayTimeout); }
                    displayTimeout = setTimeout(() => {
                        display.classList.remove('visible');
                        displayTimeout = null;
                    }, 1500);
                    return true; 
                }
                return false; 
            }

            function stopHolding() {
                bodyEl.classList.remove('no-font-transition'); 
                if (holdTimeout) { clearTimeout(holdTimeout); holdTimeout = null; }
                if (holdInterval) { clearInterval(holdInterval); holdInterval = null; }
                queueMathJaxTypeset();
            }

            function startHolding(direction) {
                bodyEl.classList.add('no-font-transition');
                updateFontSize(currentSize + direction * step);
                if (holdTimeout) clearTimeout(holdTimeout);
                if (holdInterval) clearInterval(holdInterval);

                holdTimeout = setTimeout(() => {
                    holdInterval = setInterval(() => {
                        if (!updateFontSize(currentSize + direction * step)) {
                            stopHolding(); 
                        }
                    }, repeatInterval);
                }, initialHoldDelay);
            }

            if (minusBtn && plusBtn && display) {
                minusBtn.addEventListener('mousedown', (e) => { e.preventDefault(); startHolding(-1); });
                plusBtn.addEventListener('mousedown', (e) => { e.preventDefault(); startHolding(1); });
                window.addEventListener('mouseup', stopHolding); 
                minusBtn.addEventListener('mouseleave', stopHolding); 
                plusBtn.addEventListener('mouseleave', stopHolding);

                htmlEl.style.setProperty('--base-font-size', currentSize + 'px');
                display.textContent = currentSize + 'px';
                console.log("Font control initialized. Current size:", currentSize);
                 if (window.MathJax) {
                     MathJax.startup.promise.then(() => {
                         console.log("Queueing initial MathJax typeset");
                         queueMathJaxTypeset(); 
                     });
                 }
            } else {
                console.error("Font control elements not found!");
            }

             const formulaContainers = document.querySelectorAll('.formula-container');
             formulaContainers.forEach(container => {
                 container.addEventListener('wheel', function(event) {
                     const isScrollableHorizontally = this.scrollWidth > this.clientWidth;
                     if (isScrollableHorizontally) {
                         if (event.deltaY !== 0) { 
                             event.preventDefault();
                             this.scrollLeft += event.deltaY;
                         }
                     }
                 }, { passive: false });
             });
             console.log("Horizontal scroll override applied to formula containers.");

        });
    </script>

</body>
</html>